<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Lonely?</title>
    <style>
        body {
            background-color: #1f2937;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            font-family: Arial, sans-serif;
            transition: background-color 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        body.light {
            background-color: #e5e7eb;
        }

        .page-header {
            height: 52px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 24px;
            background-color: #111827;
            color: #f3f4f6;
            box-sizing: border-box;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 900;
        }

        body.light .page-header {
            background-color: #e5e7eb;
            color: #111827;
        }

        .page-header .center {
            font-size: 18px;
            font-weight: bold;
        }

        .mode-btn {
            background: transparent;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: inherit;
        }

        .main-wrapper {
            display: flex;
            flex: 1;
            padding-top: 52px;
            gap: 48px;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-width: 150px;
        }

        .side-panel label {
            color: #f3f4f6;
            font-size: 14px;
        }

        body.light .side-panel label {
            color: #111827;
        }

        .side-panel input,
        .side-panel select {
            padding: 6px 8px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 14px;
        }

        .avatar-selector {
            display: flex;
            gap: 6px;
        }

        .avatar-selector img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid transparent;
            object-fit: cover;
            cursor: pointer;
        }

        .avatar-selector img.selected {
            border-color: #10b981;
        }

        .phone-wrapper {
            display: flex;
            gap: 48px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        .phone {
            flex: 1 1 275px;
            max-width: 275px;
            height: 500px;
            background: #ffffff;
            border-radius: 48px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            border: 8px solid #1f2937;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        body.light .phone {
            background: #ffffff;
            border-color: #e5e7eb;
        }

        body.dark .phone {
            background: #0b1220;
            border-color: #111827;
        }

        .status-bar {
            position: absolute;
            top: 0;
            width: 100%;
            height: 48px;
            background: #ffffff;
            z-index: 20;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 0 8px 8px;
            font-size: 12px;
            font-weight: bold;
            color: #222222;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark .status-bar {
            background: transparent;
            color: #f3f4f6;
        }

        .content {
            flex: 1;
            overflow: hidden;
            padding-top: 56px;
            padding-bottom: 70px;
            background: #f9fafb;
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s ease;
        }

        body.dark .content {
            background: #0b1220;
        }

        .header {
            padding: 0 24px;
            margin-top: 8px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header .sub {
            font-size: 12px;
            color: #9ca3af;
        }

        .header .name {
            font-size: 20px;
            font-weight: bold;
            color: #1f2937;
        }

        body.dark .header .name,
        body.dark .header .sub {
            color: #f3f4f6;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid #dddddd;
            object-fit: cover;
        }

        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding-top: 8px;
            padding-left: 16px;
            padding-right: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            scroll-behavior: smooth;
        }

        .chat-area::-webkit-scrollbar {
            display: none;
        }

        .msg {
            display: flex;
            align-items: flex-end;
            max-width: 85%;
            gap: 6px;
        }

        .msg.outgoing {
            margin-left: auto;
            justify-content: flex-end;
        }

        .msg.incoming {
            margin-right: auto;
            justify-content: flex-start;
        }

        .bubble {
            padding: 10px 14px;
            border-radius: 18px;
            font-size: 12px;
            /* é è¨­ä¸­ 12px */
            line-height: 1.3;
            word-break: break-word;
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.04);
            max-width: 240px;
        }

        .msg.outgoing .bubble {
            background: #dcf8c6;
            color: #111827;
            border-bottom-right-radius: 6px;
        }

        body.dark .msg.outgoing .bubble {
            background: #185e1a;
            color: #ecfdf5;
        }

        .msg.incoming .bubble {
            background: #ffffff;
            color: #111827;
            border-bottom-left-radius: 6px;
        }

        body.dark .msg.incoming .bubble {
            background: #111827;
            color: #f3f4f6;
        }

        .time {
            font-size: 10px;
            color: #9ca3af;
            opacity: 0.9;
            white-space: nowrap;
            margin-bottom: 4px;
        }

        body.dark .time {
            color: #9ca3af;
        }

        .input-area {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            background: transparent;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .input-area .text {
            flex: 1;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            outline: none;
            padding: 12px 14px;
            border-radius: 24px;
            font-size: 14px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);
            resize: none;
            max-height: 120px;
            min-height: 20px;
        }

        body.dark .input-area .text {
            background: rgba(255, 255, 255, 0.04);
            color: #e5e7eb;
        }

        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            border: none;
            background: #10b981;
            color: white;
            font-size: 18px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        body.dark .send-btn {
            background: #059669;
        }
    </style>
</head>

<body class="light">

    <header class="page-header">
        <button class="mode-btn" id="sunBtn">â˜€ï¸</button>
        <div class="center">æ²’æœ‹å‹ï¼Œä¾†èŠå¤©</div>
        <button class="mode-btn" id="moonBtn">ğŸŒ™</button>
    </header>

    <div class="main-wrapper">
        <!-- å·¦å´é¢æ¿ -->
        <div class="side-panel" id="panelA">
            <label>é¸æ“‡é ­åƒ</label>
            <div class="avatar-selector" data-target="A">
                <img src="https://picsum.photos/50/50?random=1" class="selected">
                <img src="https://picsum.photos/50/50?random=2">
                <img src="https://picsum.photos/50/50?random=3">
                <img src="https://picsum.photos/50/50?random=4">
                <img src="https://picsum.photos/50/50?random=5">
            </div>
            <label>æ‰‹æ©Ÿ A åå­—</label>
            <input type="text" class="name-input" value="å°ç‹">
            <label>æ‰‹æ©Ÿ A å‰¯æ¨™é¡Œ</label>
            <input type="text" class="sub-input" value="äººç”Ÿæµ·æµ·">

            <label>èŠå¤©å­—é«”å¤§å°</label>
            <select class="font-size-select" data-target="A">
                <option value="10px">å°</option>
                <option value="12px" selected>ä¸­</option>
                <option value="14px">å¤§</option>
            </select>


        </div>

        <!-- æ‰‹æ©Ÿ A èˆ‡ B -->
        <div class="phone-wrapper">
            <div class="phone" data-user="A">
                <div class="status-bar">
                    <span class="time-display"></span>
                    <div><span>ğŸ“¶</span> <span>ğŸ”‹</span></div>
                </div>
                <div class="content">
                    <div class="header">
                        <div>
                            <p class="name">å°ç‹</p>
                            <p class="sub">äººç”Ÿæµ·æµ·</p>
                        </div>
                        <img src="https://picsum.photos/50/50?random=1" class="avatar">
                    </div>
                    <div class="chat-area" id="chatA"></div>
                    <div class="input-area">
                        <textarea id="inputA" class="text" rows="1" placeholder="è¼¸å…¥è¨Šæ¯"></textarea>
                        <button class="send-btn" data-send-for="A">â¤</button>
                    </div>
                </div>
            </div>

            <div class="phone" data-user="B">
                <div class="status-bar">
                    <span class="time-display"></span>
                    <div><span>ğŸ“¶</span> <span>ğŸ”‹</span></div>
                </div>
                <div class="content">
                    <div class="header">
                        <div>
                            <p class="name">å°ä¸‰</p>
                            <p class="sub">éŒ¢é›£è³º</p>
                        </div>
                        <img src="https://picsum.photos/50/50?random=1" class="avatar">
                    </div>
                    <div class="chat-area" id="chatB"></div>
                    <div class="input-area">
                        <textarea id="inputB" class="text" rows="1" placeholder="è¼¸å…¥è¨Šæ¯"></textarea>
                        <button class="send-btn" data-send-for="B">â¤</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³å´é¢æ¿ -->
        <div class="side-panel" id="panelB">
            <label>é¸æ“‡é ­åƒ</label>
            <div class="avatar-selector" data-target="B">
                <img src="https://picsum.photos/50/50?random=1" class="selected">
                <img src="https://picsum.photos/50/50?random=2">
                <img src="https://picsum.photos/50/50?random=3">
                <img src="https://picsum.photos/50/50?random=4">
                <img src="https://picsum.photos/50/50?random=5">
            </div>
            <label>æ‰‹æ©Ÿ B åå­—</label>
            <input type="text" class="name-input" value="å°ä¸‰">
            <label>æ‰‹æ©Ÿ B å‰¯æ¨™é¡Œ</label>
            <input type="text" class="sub-input" value="éŒ¢é›£è³º">

            <label>èŠå¤©å­—é«”å¤§å°</label>
            <select class="font-size-select" data-target="B">
                <option value="10px">å°</option>
                <option value="12px" selected>ä¸­</option>
                <option value="14px">å¤§</option>
            </select>
        </div>
    </div>

    <script>
        const bodyEl = document.body;
        const chatA = document.getElementById("chatA");
        const chatB = document.getElementById("chatB");
        const inputA = document.getElementById("inputA");
        const inputB = document.getElementById("inputB");
        const sendBtns = document.querySelectorAll('.send-btn');

        const sunBtn = document.getElementById('sunBtn');
        const moonBtn = document.getElementById('moonBtn');

        if (!bodyEl.classList.contains('dark') && !bodyEl.classList.contains('light')) {
            bodyEl.classList.add('dark');
        }

        sunBtn.addEventListener('click', () => {
            bodyEl.classList.add('light');
            bodyEl.classList.remove('dark');
        });

        moonBtn.addEventListener('click', () => {
            bodyEl.classList.add('dark');
            bodyEl.classList.remove('light');
        });

        function nowTime() {
            const d = new Date();
            return `${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;
        }

        function updateTime() {
            document.querySelectorAll('.status-bar .time-display').forEach(el => {
                el.textContent = nowTime();
            });
        }
        updateTime();
        setInterval(updateTime, 1000);

        function appendMessage(targetChatEl, type, text) {
            const msg = document.createElement('div');
            msg.className = 'msg ' + type;
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            bubble.textContent = text;

            // è¨­å®šå­—é«”å¤§å°
            const target = targetChatEl.id === "chatA" ? 'A' : 'B';
            const fontSelect = document.querySelector(`.font-size-select[data-target="${target}"]`);
            bubble.style.fontSize = fontSelect.value;

            const timeEl = document.createElement('div');
            timeEl.className = 'time';
            timeEl.textContent = nowTime();

            if (type === 'outgoing') {
                msg.appendChild(timeEl);
                msg.appendChild(bubble);
            } else {
                msg.appendChild(bubble);
                msg.appendChild(timeEl);
            }

            targetChatEl.appendChild(msg);
            targetChatEl.scrollTop = targetChatEl.scrollHeight;
        }

        function postMessage(sender, text) {
            if (!text || !text.trim()) return;
            const clean = text.trim();
            if (sender === 'A') {
                appendMessage(chatA, 'outgoing', clean);
                appendMessage(chatB, 'incoming', clean);
            } else {
                appendMessage(chatB, 'outgoing', clean);
                appendMessage(chatA, 'incoming', clean);
            }
        }

        sendBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const who = btn.getAttribute('data-send-for');
                if (who === 'A') {
                    postMessage('A', inputA.value);
                    inputA.value = '';
                } else {
                    postMessage('B', inputB.value);
                    inputB.value = '';
                }
            });
        });

        inputA.addEventListener('keydown', e => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                postMessage('A', inputA.value);
                inputA.value = '';
            }
        });
        inputB.addEventListener('keydown', e => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                postMessage('B', inputB.value);
                inputB.value = '';
            }
        });

        // åŒæ­¥åå­—èˆ‡å‰¯æ¨™é¡Œ
        function setupPanel(panelId, phoneSelector) {
            const panel = document.getElementById(panelId);
            const phone = document.querySelector(phoneSelector);
            const nameInput = panel.querySelector('.name-input');
            const subInput = panel.querySelector('.sub-input');
            const nameEl = phone.querySelector('.name');
            const subEl = phone.querySelector('.sub');

            nameInput.addEventListener('input', () => nameEl.textContent = nameInput.value);
            subInput.addEventListener('input', () => subEl.textContent = subInput.value);
        }

        setupPanel('panelA', '.phone[data-user="A"]');
        setupPanel('panelB', '.phone[data-user="B"]');
        // æ›´æ–°æ•´å€‹èŠå¤©å€å­—é«”å¤§å°
        document.querySelectorAll('.font-size-select').forEach(select => {
            const target = select.getAttribute('data-target');
            const chatArea = document.querySelector(`#chat${target}`);

            // ç•¶é¸æ“‡æ”¹è®Šæ™‚
            select.addEventListener('change', () => {
                const newSize = select.value;
                chatArea.querySelectorAll('.bubble').forEach(bubble => {
                    bubble.style.fontSize = newSize;
                });
            });
        });

        // é ­åƒé¸æ“‡åŠŸèƒ½
        document.querySelectorAll('.avatar-selector').forEach(selector => {
            const target = selector.getAttribute('data-target');
            const phoneAvatar = document.querySelector(`.phone[data-user="${target}"] .avatar`);
            selector.querySelectorAll('img').forEach(img => {
                img.addEventListener('click', () => {
                    selector.querySelectorAll('img').forEach(i => i.classList.remove('selected'));
                    img.classList.add('selected');
                    phoneAvatar.src = img.src;
                });
            });
        });

        // é è¨­è¨Šæ¯
        postMessage('B', 'äººç”Ÿå¦‚ä½•äººç”Ÿå¦‚ä½•äººç”Ÿå¦‚ä½•äººç”Ÿå¦‚ä½•äººç”Ÿå¦‚ä½•äººç”Ÿå¦‚ä½•');
        postMessage('A', 'æˆ‘æ€çŸ¥é“æˆ‘æ€çŸ¥é“æˆ‘æ€çŸ¥é“æˆ‘æ€çŸ¥é“æˆ‘æ€çŸ¥é“');
    </script>
</body>

</html>